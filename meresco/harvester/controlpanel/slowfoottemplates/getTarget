<%
domainId = args.domainId
targetId = args.targetId

targetIds = xpath(aslxml(url('/' + domainId + '.domain')).getroot(), 'targetId/text()')

if not targetId in targetIds:
  include('/saharageterror?errorCode=idDoesNotExist')
else:
  type('text/xml; charset=utf-8')
%><?xml version="1.0" encoding="UTF-8"?>
<saharaget xmlns="http://sahara.cq2.org/xsd/saharaget.xsd">
<%
  include('/saharagetTime')
%>
 <request>
  <verb>GetTarget</verb>
  <domainId><% escape_xml(domainId) %></domainId>
  <targetId><% escape_xml(targetId) %></targetId>
 </request>
 <GetTarget>
<%
  req.write(lxmltostring(aslxml(url('/' + targetId + '.target')).getroot(), pretty_print=True))
%>
 </GetTarget>
</saharaget><%
#
%>