<%
repository = lxml.getroot()
inputquery = { 'verb':'ListRecords', 'metadataPrefix': xpathFirst(repository, 'metadataPrefix/text()') }
repositorySet = xpathFirst(repository, 'set/text()')
if repositorySet is not None: 
  inputquery['set']=repositorySet
inputurl = xpathFirst(repository, 'baseurl/text()') + '?' + urlencode(inputquery)
domainId = args.name.split('.')[0]

redirect('/onlinemapping?' + urlencode({'domainId': domainId, 'mappingId':xpathFirst(repository, 'mappingId/text()'), 'inputurl':inputurl}))
%>
