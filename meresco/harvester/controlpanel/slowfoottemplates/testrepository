<%
repository = req.proxy.getRepository(identifier=args.repositoryId, domainId=args.domainId)
inputquery = { 'verb':'ListRecords', 'metadataPrefix': repository.get('metadataPrefix') }
repositorySet = repository.get('set')
if repositorySet is not None:
  inputquery['set']=repositorySet
inputurl = repository.get('baseurl') + '?' + urlencode(inputquery)
domainId = args.name.split('.')[0]

redirect('/onlinemapping?' + urlencode({'domainId': domainId, 'mappingId': repository.get('mappingId'), 'inputurl':inputurl}))
%>
