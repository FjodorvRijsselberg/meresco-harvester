<%
domainId = args.domainId
mappingId = args.mappingId

mappingIds = xpath(aslxml(url('/' + domainId + '.domain')).getroot(), 'mappingId/text()')

if not mappingId in mappingIds:
  include('/saharageterror?errorCode=idDoesNotExist')
else:
  type('text/xml; charset=utf-8')
%><?xml version="1.0" encoding="UTF-8"?>
<saharaget xmlns="http://sahara.cq2.org/xsd/saharaget.xsd">
<%
  include('/saharagetTime')
%>
 <request>
  <verb>GetMapping</verb>
  <domainId><% escape_xml(domainId) %></domainId>
  <mappingId><% escape_xml(mappingId) %></mappingId>
 </request>
 <GetMapping>
<%
  req.write(lxmltostring(aslxml(url('/' + mappingId + '.mapping')).getroot(), pretty_print=True))
%>
 </GetMapping>
</saharaget><%
#
%>